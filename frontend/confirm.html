<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…ÙˆØ¹Ø¯ â€” BONITA TOUCH</title>
  <style>
    :root{
      --bg:#fafafa; --card:#fff; --line:#ececec; --fg:#111; --muted:#666;
      --accent:#6f4ef6; --radius:16px; --shadow:0 12px 40px rgba(0,0,0,.06);
      --success:#22c55e; --danger:#ef4444;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--fg)}
    a{text-decoration:none;color:inherit}

    .page{max-width:1180px;margin:0 auto;padding:0 16px 40px}

    .photo-slider{
      position:relative;
      width:100%;
      max-width:1180px;
      height:260px;
      border-radius:24px;
      overflow:hidden;
      box-shadow:0 18px 48px rgba(0,0,0,0.08);
      margin: 0 auto 24px auto;
      background:#fde3ee;
    }
    .photo-slider img{
      position:absolute;
      width:100%;
      height:260px;
      object-fit:cover;
      border-radius:24px;
      top:0;left:0;
      opacity:0;
      transition:opacity 1s ease-in-out;
    }
    .photo-slider img.active{
      opacity:1;
      position:relative;
    }

    .hero{display:none}
    .layout{display:grid;grid-template-columns:1fr 340px;grid-template-areas:"main aside";gap:24px;align-items:start;margin-top:24px}
    main{grid-area: main}
    aside{grid-area: aside}

    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow)}
    .box{padding:18px}
    .row{display:flex;align-items:center;gap:10px}
    .row-between{display:flex;justify-content:space-between;gap:10px;align-items:center}
    .hr{height:1px;background:linear-gradient(90deg,#eee,#f2eafe,#eee);margin:12px 0}

    .status{display:inline-flex;align-items:center;gap:10px;border:1px solid #dcfce7;background:#f0fdf4;color:#166534;border-radius:999px;padding:8px 12px;font-weight:800}
    .big-time{font-size:32px;font-weight:900;margin:8px 0}
    .muted{color:var(--muted)}
    .pill{display:inline-block;padding:6px 10px;background:#f3f4f6;border-radius:999px;font-size:12px}

    .btn{appearance:none;border:0;border-radius:14px;padding:14px 16px;font-weight:800;cursor:pointer}
    .btn-dark{background:#111;color:#fff}
    .btn-light{background:#fff;border:1px solid var(--line)}
    .btn-danger{background:var(--danger);color:#fff}
    .btn-ghost{background:#f5f2ff;border:1px solid #e7e1ff;color:#4b3fd6}

    .brand-card{display:flex;align-items:center;gap:14px;padding:16px}
    .brand-card .thumb{width:100px;height:100px;border-radius:20px;object-fit:cover;box-shadow:var(--shadow)}
    .brand-card .name{font-size:22px;font-weight:900;margin:0}
    .brand-card .meta{color:var(--muted);margin-top:6px}

    .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.45); padding:16px; z-index:40}
    .modal.show{display:grid}
    .modal .sheet{width:min(720px,100%); background:#fff; border-radius:20px; box-shadow:var(--shadow); overflow:hidden}
    .sheet-head{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;border-bottom:1px solid var(--line)}
    .sheet-body{padding:18px}
    .close-x{inline-size:36px;block-size:36px;border-radius:10px;border:1px solid var(--line);background:#fff;cursor:pointer}

    .actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .actions .btn{min-width:180px}
    @media(max-width:520px){.actions{justify-content:stretch}.actions .btn{flex:1}}
    @media(max-width:1024px){.layout{grid-template-columns:1fr;grid-template-areas:"aside""main"}}
  </style>
</head>
<body>

<section class="photo-slider">
  <img src="1.jpg" class="active" />
  <img src="2.jpg" />
  <img src="3.jpg" />
  <img src="4.jpg" />
</section>

<div class="page">
  <div class="layout">

    <main>
      <div class="card box">
        <div class="row" style="justify-content:space-between">
          <div class="status">ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯</div>
          <div class="pill" id="datePill">â€”</div>
        </div>

        <div id="successMessage" style="display:none;background:#f0fdf4;border:1px solid #dcfce7;color:#166534;padding:12px;border-radius:12px;margin-bottom:12px;font-weight:600;text-align:center">
          ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø¨Ù†Ø¬Ø§Ø­
        </div>

        <div class="big-time" id="timeBig">â€”</div>
        <div class="muted" id="durationText">Ø§Ù„Ù…Ø¯Ø© 45 Ø¯Ù‚ÙŠÙ‚Ø©</div>

        <div class="hr"></div>

        <div class="muted" style="margin-bottom:4px">Ø§Ù„Ø§Ø³Ù…</div>
        <div id="customerName">â€”</div>

        <div class="hr"></div>

        <div class="muted" style="margin-bottom:4px">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</div>
        <div id="customerPhone">â€”</div>

        <div class="hr"></div>

        <div class="actions">
          <button class="btn btn-ghost" id="editBtn">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¹Ø¯</button>
          <button class="btn btn-danger" id="cancelBtn">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…ÙˆØ¹Ø¯</button>
        </div>
      </div>
    </main>

    <aside>
      <div class="card brand-card" style="margin-bottom:14px">
        <div style="flex:1">
          <h3 class="name">BONITA TOUCH</h3>
          <div class="meta">Ø§Ù„Ù†Ø¹ÙŠÙ…ØŒ Ø¬Ø¯Ø©</div>
        </div>
        <img class="thumb" src="4.jpg">
      </div>

      <div class="card box">
        <div class="muted" style="margin-bottom:8px">Ø§Ù„Ø®Ø¯Ù…Ø©/Ø§Ù„Ø®Ø¯Ù…Ø§Øª</div>
        <div id="sideItems"></div>

        <div class="hr"></div>
        <div class="muted" style="margin-bottom:4px">Ø§Ù„Ù…Ø­ØªØ±Ù/Ø§Ù„Ù…Ø­ØªØ±ÙÙˆÙ†</div>
        <div class="pill" id="prosPill">Ø£ÙŠ Ù…Ø­ØªØ±Ù</div>

        <div class="hr"></div>
        <div class="row-between">
          <span class="muted">Ø§Ù„ØªØ§Ø±ÙŠØ®</span>
          <span id="dateOut">â€”</span>
        </div>
        <div class="row-between" style="margin-top:8px">
          <span class="muted">Ø§Ù„ÙˆÙ‚Øª</span>
          <span id="timeOut">â€”</span>
        </div>

        <div class="hr"></div>
        <div class="row-between">
          <span class="muted">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
          <span style="font-weight:900"><span id="totalSide">0</span> Ø±.Ø³</span>
        </div>

        <button class="btn btn-dark" style="width:100%;margin-top:12px" id="backHome">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
      </div>
    </aside>
  </div>
</div>

<div class="modal" id="cancelModal">
  <div class="sheet" style="max-width:560px">
    <div class="sheet-head">
      <div style="font-weight:900;font-size:20px">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø±ØºØ¨Ø© ÙØ¹Ù„Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ØŸ</div>
      <button class="close-x" data-close>âœ•</button>
    </div>
    <div class="sheet-body">
      <p class="muted" style="line-height:1.9">
        Ø¥Ø°Ø§ Ø±ØºØ¨ØªÙ ÙÙŠ ØªØºÙŠÙŠØ± ÙˆÙ‚Øª Ø§Ù„Ù…ÙˆØ¹Ø¯ØŒ ÙÙŠÙ…ÙƒÙ†ÙƒÙ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø­Ø¬Ø².
        Ù‡Ù„ Ù„Ø¯ÙŠÙƒÙ Ø±ØºØ¨Ø© ÙØ¹Ù„Ø§Ù‹ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ù…ÙˆØ¹Ø¯ÙƒÙØŸ
      </p>
      <div class="row" style="justify-content:flex-end;gap:8px;margin-top:6px">
        <button class="btn btn-light" data-close>Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
        <button class="btn btn-danger" id="confirmCancel">Ù†Ø¹Ù…ØŒ Ø¥Ù„ØºØ§Ø¡</button>
      </div>
    </div>
  </div>
</div>

<script>
  const slides = document.querySelectorAll('.photo-slider img');
  let currentIndex = 0;

  function showSlide(index){
    slides.forEach((slide,i)=>slide.classList.toggle('active',i===index));
  }
  function nextSlide(){
    currentIndex = (currentIndex + 1) % slides.length;
    showSlide(currentIndex);
  }
  setInterval(nextSlide,4000);
  showSlide(currentIndex);

  // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ ğŸ‘‡
  cancelBtn.onclick = () => location.href = 'canceled.html';
  editBtn.onclick   = () => location.href = 'time.html';
  backHome.onclick  = () => location.href = 'home.html'; /* â­ ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù‡Ù†Ø§ */

  // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬Ø² Ù…Ù† LocalStorage
  let booking = {};
  try {
    booking = JSON.parse(localStorage.getItem('booking') || '{}');
  } catch(e){}

  // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙÙŠ aside
  function renderServices(){
    const sideItems = document.getElementById('sideItems');

    if(Array.isArray(booking.items) && booking.items.length){
      sideItems.innerHTML = booking.items.map(item => `
        <div class="row-between" style="padding:6px 0">
          <span>${item.title || item.name || 'Ø®Ø¯Ù…Ø©'}</span>
          <span>${item.price ? item.price + ' Ø±.Ø³' : ''}</span>
        </div>
      `).join('');
    } else {
      sideItems.innerHTML = '<div class="muted">â€”</div>';
    }

    document.getElementById('datePill').textContent = booking.date || 'â€”';
    document.getElementById('dateOut').textContent  = booking.date || 'â€”';
    document.getElementById('timeBig').textContent  = booking.time || 'â€”';
    document.getElementById('timeOut').textContent  = booking.time || 'â€”';
    document.getElementById('totalSide').textContent = booking.total || 0;
    document.getElementById('customerName').textContent = booking.customer_name || 'â€”';
    document.getElementById('customerPhone').textContent = booking.contact_value || 'â€”';

    const prosPill = document.getElementById('prosPill');
    prosPill.textContent = (booking.pros && booking.pros.length)
      ? booking.pros.map(p => p.name).join('ØŒ ')
      : 'Ø£ÙŠ Ù…Ø­ØªØ±Ù';
  }

  // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  renderServices();

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ ÙÙŠ URL
  const urlParams = new URLSearchParams(window.location.search);
  if(urlParams.get('success') === '1'){
    document.getElementById('successMessage').style.display = 'block';
    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„ Ù…Ù† URL Ø¨Ø¹Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    window.history.replaceState({}, document.title, window.location.pathname);
  }

</script>

</body>
</html>
